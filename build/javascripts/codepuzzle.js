((function(){var a,b,c,d,e,f;a={caretNode:null,caretBlinkInterval:null,currentLine:0,currentPosition:0,numOfLines:0,enableTypingEffect:!1,labelCaretPosition:function(b,c){return b==null&&(b=a.currentPosition),c==null&&(c=a.currentLine),$("#caret-position").text(""+c+","+b)},initCaret:function(){var b;return b=a.vimBuffer.find("li:last-child span"),$(".caret").length>0?($(".caret:not(:first)").removeClass("caret"),a.caretNode=$(".caret").first()):a.caretNode=b.last(),a.caretNode.addClass("caret"),a.currentLine=a.numOfLines,a.currentPosition=b.length,a.labelCaretPosition(),a.initCaretBlink()},initCaretBlink:function(){return a.caretBlinkInterval&&window.clearInterval(a.caretBlinkInterval),a.caretBlinkInterval=window.setInterval(function(){return a.caretNode.toggleClass("blink")},500)},moveCaretByCommand:function(b){var c,d;c=a.vimBuffer.find("li:nth-child("+a.currentLine+")").text(),b==="word"?(d=c.substring(a.currentPosition).search(/[^\w]\w/),d>-1&&(d+=2)):b==="end"&&(d=c.substring(a.currentPosition).search(/\w([^\w]|$)/),d>-1&&(d+=1));if(d&&d>0)return a.moveCaret(d,0)},moveCaret:function(b,c){var d,e,f,g,h,i;h=a.currentPosition+b,i=a.currentLine+c;if(h>0&&i>0&&(h!==a.currentPosition||i!==a.currentLine)){g=a.vimBuffer.find("li:nth-child("+i+")"),d=g.find("span:nth-child("+h+")"),d.length===0&&(f=g.find("span"),b===-1&&(h=f.length-1,d=$(f[h-1])),c!==0&&(d=f.last(),e=f.length));if(d.length>0)return a.currentPosition=h,a.currentLine=i,a.caretNode.removeClass("caret"),a.caretNode=d,a.caretNode.addClass("caret"),a.initCaretBlink(),e?a.labelCaretPosition(e,i):a.labelCaretPosition()}},initCaretInteraction:function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return j=37,m=38,k=39,d=40,f=72,g=74,h=75,i=76,n=87,e=69,b=66,l=32,c=8,o={},o[j]=function(){return a.moveCaret(-1,0)},o[m]=function(){return a.moveCaret(0,-1)},o[k]=function(){return a.moveCaret(1,0)},o[d]=function(){return a.moveCaret(0,1)},o[l]=o[k],o[c]=o[j],o[f]=o[j],o[g]=o[d],o[h]=o[m],o[i]=o[k],o[n]=function(){return a.moveCaretByCommand("word")},o[e]=function(){return a.moveCaretByCommand("end")},o[b]=function(){return a.moveCaretByCommand("back")},$(window).keydown(function(a){try{return o[a.which||a.keyCode]()}catch(a){}}),$(document.body).trigger("click")},renderNerdtreeTildes:function(){return $("#nerdtree-tildes, #main-tildes").each(function(){var a,b,c;b=$(this),a=60,c=[];while(a-=1)c.push(b.text(""+b.text()+"~\n"));return c})},vimify:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;k=$("#vimify"),k.find("br").remove(),i=k.html().split("\n"),a.vimBuffer=$("#vim-content"),a.vimBuffer.empty(),e=0;for(l=0,n=i.length;l<n;l++){f=i[l];if(e>1&&e<i.length-1){g="",j=!1,p=f.split("");for(m=0,o=p.length;m<o;m++)d=p[m],d==="<"?(j=!0,g+="<"):d===">"?(j=!1,g+=">"):j?g+=d:g+="<span style='display: none;'>"+d+"</span>";g===""&&(g="<span>&nbsp;</span>"),h="<li style='display: none;'><code>"+g+"</code></li>",a.vimBuffer.append(h),a.renderTypingEffect(e)}e++}return k.empty(),a.enableTypingEffect?c=window.setInterval(function(){if(a.vimBuffer.find("span").queue()[0]!=="inprogress")return window.clearInterval(c),b()},400):(a.vimBuffer.find("li:hidden, span:hidden").show(),b())},renderTypingEffect:function(b){var c;if(!a.enableTypingEffect)return;return c=a.vimBuffer.find("li:last-child"),c.find("span").each(function(d){var e;return e=$(this),e.delay(100).show(0,function(){var f;return(f=a.tmpCaret)!=null&&f.removeClass("caret"),a.tmpCaret=e,d===0&&c.show(),a.labelCaretPosition(d,b)}).addClass("caret")})},applyHeightToWidthRatio:function(){var a,b;return a=$.browser.webkit?44:88,b=a+$("#vim-content").height(),$("#main").height(b),$("#nerdtree").height(b)},degradesGracefully:function(){return $("#vimify").show(),!0},init:function(){if(a.degradesGracefully())return;return a.renderNerdtreeTildes(),a.enableTypingEffect=$.browser.webkit&&screen.width>=480,a.vimify(function(){a.numOfLines=$("#vim-content li").length;if(a.numOfLines>0)return a.initCaret(),a.initCaretInteraction(),a.applyHeightToWidthRatio()}),$(window).resize(a.applyHeightToWidthRatio)}},$(function(){return a.init()}),b=navigator.userAgent.toLowerCase(),d=["webkit","presto","gecko","msie"];for(e=0,f=d.length;e<f;e++){c=d[e];if(b.indexOf(c)!==-1){$("html").addClass(c);break}}})).call(this)